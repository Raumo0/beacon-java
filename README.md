# Java Beacon Implementation (JBDK) [![Build Status](https://travis-ci.org/mcupak/beacon-java.svg?branch=develop)](https://travis-ci.org/mcupak/beacon-java) [![GitHub license](https://img.shields.io/badge/license-mit-blue.svg)](https://raw.githubusercontent.com/mcupak/beacon-java/develop/LICENSE)

## Contents

* [What it is](#what-it-is)
* [System requirements](#system-requirements)
* [Modules](#Modules)
* [Beacon Specification](#beacon-specification)
* [How it works](#how-it-works)
* [Technologies](#technologies)

##What it is
This project contains the BDK (beacon development kit) for Java (EE) developers. The BDK provides all of the tools required to create a basic rest implementation for a beacon almost straight out of the box with only minimal set up required.
Users can extend the BDK to make it fit within their own project, or use it as is defining their own adapter to retrieve data from their preferred data source.

##System requirements
All you need to build this project is Java 8.0 (Java SDK 1.8) or later, Maven 3.0 or later. Since the project is Java EE based, an application server with support for Java EE 7 is needed to deploy the application (e.g. JBoss EAP or WildFly).

##Modules
1. [beacon-java-core](/beacon-java-core)
    Contains core classes and functions shared across modules in the BJDK.
2. [beacon-java-rest](/beacon-java-rest)
    Rest implementation of a beacon, configured to run on a JBOSS server.
3. [sample-beacon-adapter](/sample-beacon-adapter)
    Sample beacon adapter implementation

## Beacon Specification
The BDK implements the beacon specification and relies on the data models generated by the beacon schema. At the moment the dependency is not currently listed on maven central but can be retrived from the [beacon teams git hub repository](https://github.com/ga4gh/beacon-team). 

To retrieve the dependency:

```
git clone https://github.com/ga4gh/beacon-team
cd beacon-team
mvn clean install
```

## How it Works
The project provides the following:

- API for beacons
- sample beacon implementation
- conversion of parameters to a normalized form (the same way Beacon of Beacons does)
- sample navigation webpage
- sample test suite

##How to run it
Build the project:

    mvn clean install

Start the JBoss server:

    $JBOSS_HOME/bin/standalone.sh

Deploy beacon-java-rest:

    cp beacon-java-rest/target/beacon-java-rest.war $JBOSS_HOME/standalone/deployments/

The application should now be running on <http://localhost:8080/beacon-java>.

In order to run the tests from beacon-java-rest in a managed (remote) container, use the test-managed (test-remote) Maven profile. Example:

    mvn test -Ptest-managed

##Creating a beacon
The beacon implementation is designed to use a beacon-adapter provided through the [beacon-adapter-api project](https://github.com/mcupak/beacon-adapter-api) project. The user can either extend the abstract BeaconAdapter class to create a custom implementation, or they can use one of the beacon-adapter implementations that are provided

Once you have created your own adapter, simply replace the adapter dependency in the beacon-java-rest's pom with your own. The sample beacon adapter is intended to be a placeholder to allow the tests to be run, and to give the user an idea of how to implement a beacon. After this has been completely they are free to implement their own adapter.

- Add your desired beacon adapter to the pom.xml in the commented out section
- Deploy The beacon
- Run the test-managed profile to ensure the beacon works and complies with the beacon spec

The API takes care of the rest and provides the following endpoints upon deployment of your beacon:

    http://localhost:8080/beacon-java - information about your beacon
    http://localhost:8080/beacon-java/query - access to query service


##Technologies
Java EE. CDI, JAX-RS, JAXB. Tested with Arquillian/ShrinkWrap.
